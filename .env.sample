# FindMe Environment Configuration
# Copy this file to .env and update with your actual values
# DO NOT commit .env file to version control

#──────────────────────────────────────────────────────────────
# Application Environment
#──────────────────────────────────────────────────────────────

# Environment: development, staging, production
APP_ENV=development

# Application name
APP_NAME=FindMe

# Application version
APP_VERSION=0.1.0

#──────────────────────────────────────────────────────────────
# Backend API Configuration
#──────────────────────────────────────────────────────────────

# API server host
API_HOST=0.0.0.0

# API server port
API_PORT=8080

# API base URL (used by mobile app)
API_URL=http://localhost:8080

# API request timeout (seconds)
API_TIMEOUT=30

# Enable API documentation (Swagger)
API_DOCS_ENABLED=true

#──────────────────────────────────────────────────────────────
# Database Configuration - PostgreSQL
#──────────────────────────────────────────────────────────────

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://findme:findme_dev_password@localhost:5432/findme_db

# Database host
DB_HOST=localhost

# Database port
DB_PORT=5432

# Database name
DB_NAME=findme_db

# Database user
DB_USER=findme

# Database password
DB_PASSWORD=findme_dev_password

# SSL mode: disable, require, verify-ca, verify-full
DB_SSL_MODE=disable

# Max open connections
DB_MAX_OPEN_CONNS=25

# Max idle connections
DB_MAX_IDLE_CONNS=5

# Connection max lifetime (minutes)
DB_CONN_MAX_LIFETIME=5

#──────────────────────────────────────────────────────────────
# Vector Database Configuration - Qdrant
#──────────────────────────────────────────────────────────────

# Qdrant server URL
QDRANT_URL=http://localhost:6333

# Qdrant API key (leave empty for local development)
QDRANT_API_KEY=

# Qdrant collection name for profile embeddings
QDRANT_COLLECTION_PROFILES=profile_embeddings

# Vector dimension size
QDRANT_VECTOR_SIZE=512

# Distance metric: Cosine, Euclid, Dot
QDRANT_DISTANCE_METRIC=Cosine

# Qdrant timeout (seconds)
QDRANT_TIMEOUT=30

#──────────────────────────────────────────────────────────────
# Cache Configuration - Redis
#──────────────────────────────────────────────────────────────

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Redis host
REDIS_HOST=localhost

# Redis port
REDIS_PORT=6379

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis database number
REDIS_DB=0

# Redis key prefix
REDIS_KEY_PREFIX=findme:

# Cache TTL in seconds
REDIS_CACHE_TTL=3600

#──────────────────────────────────────────────────────────────
# Authentication & Security
#──────────────────────────────────────────────────────────────

# JWT secret key for signing tokens (CHANGE THIS IN PRODUCTION!)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# JWT access token expiration (minutes)
JWT_ACCESS_TOKEN_EXPIRY=15

# JWT refresh token expiration (days)
JWT_REFRESH_TOKEN_EXPIRY=7

# Bcrypt cost factor (10-14 recommended, higher = more secure but slower)
BCRYPT_COST=12

# Password minimum length
PASSWORD_MIN_LENGTH=8

# Email verification token expiry (hours)
EMAIL_VERIFICATION_TOKEN_EXPIRY=24

# Password reset token expiry (hours)
PASSWORD_RESET_TOKEN_EXPIRY=1

#──────────────────────────────────────────────────────────────
# Video Storage - S3 / Cloud Storage
#──────────────────────────────────────────────────────────────

# Storage provider: s3, minio, local
STORAGE_PROVIDER=s3

# AWS S3 bucket name
S3_BUCKET_NAME=findme-videos

# AWS region
S3_REGION=us-east-1

# AWS access key ID
S3_ACCESS_KEY_ID=your-aws-access-key-id

# AWS secret access key
S3_SECRET_ACCESS_KEY=your-aws-secret-access-key

# S3 endpoint (for MinIO or custom S3-compatible storage)
S3_ENDPOINT=

# S3 use SSL
S3_USE_SSL=true

# CloudFront distribution domain (for CDN delivery)
CLOUDFRONT_DOMAIN=your-distribution.cloudfront.net

# Video upload max size (bytes) - 50MB default
VIDEO_MAX_SIZE=52428800

# Video max duration (seconds) - 2 minutes default
VIDEO_MAX_DURATION=120

# Allowed video formats (comma-separated)
VIDEO_ALLOWED_FORMATS=mp4,mov,avi

#──────────────────────────────────────────────────────────────
# AI & Machine Learning Services
#──────────────────────────────────────────────────────────────

# AI service provider: openai, custom
AI_PROVIDER=openai

# OpenAI API key (for embeddings and analysis)
OPENAI_API_KEY=your-openai-api-key

# OpenAI model for embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002

# OpenAI model for content moderation
OPENAI_MODERATION_MODEL=text-moderation-latest

# AI service timeout (seconds)
AI_SERVICE_TIMEOUT=60

# Custom AI service endpoint (if using custom provider)
CUSTOM_AI_ENDPOINT=

# Embedding batch size
EMBEDDING_BATCH_SIZE=100

#──────────────────────────────────────────────────────────────
# Video Processing
#──────────────────────────────────────────────────────────────

# Enable video transcoding
VIDEO_TRANSCODING_ENABLED=true

# Video output format
VIDEO_OUTPUT_FORMAT=mp4

# Video output quality: low, medium, high
VIDEO_OUTPUT_QUALITY=medium

# Video bitrate (kbps)
VIDEO_BITRATE=2000

# Generate thumbnail
VIDEO_GENERATE_THUMBNAIL=true

# Thumbnail size (format: WIDTHxHEIGHT)
VIDEO_THUMBNAIL_SIZE=640x360

#──────────────────────────────────────────────────────────────
# WebRTC Configuration
#──────────────────────────────────────────────────────────────

# STUN server URLs (comma-separated)
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# TURN server URLs (comma-separated)
WEBRTC_TURN_SERVERS=turn:your-turn-server.com:3478

# TURN server username
WEBRTC_TURN_USERNAME=your-turn-username

# TURN server credential
WEBRTC_TURN_CREDENTIAL=your-turn-credential

# Video call max duration (minutes) - 0 for unlimited
VIDEO_CALL_MAX_DURATION=60

# Enable call recording
VIDEO_CALL_RECORDING_ENABLED=false

#──────────────────────────────────────────────────────────────
# Email Service Configuration
#──────────────────────────────────────────────────────────────

# Email provider: smtp, sendgrid, ses, mailgun
EMAIL_PROVIDER=smtp

# SMTP host
SMTP_HOST=smtp.gmail.com

# SMTP port
SMTP_PORT=587

# SMTP username
SMTP_USERNAME=your-email@gmail.com

# SMTP password or app password
SMTP_PASSWORD=your-email-password

# Email from address
EMAIL_FROM_ADDRESS=noreply@findme.ai

# Email from name
EMAIL_FROM_NAME=FindMe

# SendGrid API key (if using SendGrid)
SENDGRID_API_KEY=

# AWS SES region (if using SES)
SES_REGION=us-east-1

#──────────────────────────────────────────────────────────────
# Push Notifications
#──────────────────────────────────────────────────────────────

# Firebase Cloud Messaging server key
FCM_SERVER_KEY=your-fcm-server-key

# Apple Push Notification Service (APNS) configuration
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apns-team-id
APNS_BUNDLE_ID=com.findme.app
APNS_KEY_PATH=/path/to/AuthKey_XXXX.p8

# Enable push notifications
PUSH_NOTIFICATIONS_ENABLED=true

#──────────────────────────────────────────────────────────────
# Rate Limiting
#──────────────────────────────────────────────────────────────

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Global rate limit (requests per minute)
RATE_LIMIT_GLOBAL=60

# Authentication rate limit (requests per hour)
RATE_LIMIT_AUTH=10

# Video upload rate limit (uploads per day)
RATE_LIMIT_VIDEO_UPLOAD=3

# API rate limit (requests per minute)
RATE_LIMIT_API=30

#──────────────────────────────────────────────────────────────
# Matching Algorithm Configuration
#──────────────────────────────────────────────────────────────

# Weekly matches count
MATCHING_WEEKLY_COUNT=4

# Matching minimum score threshold (0.0 - 1.0)
MATCHING_MIN_SCORE=0.6

# Maximum age difference (years)
MATCHING_MAX_AGE_DIFF=10

# Maximum distance (kilometers) - 0 for unlimited
MATCHING_MAX_DISTANCE=50

# Exclude previous matches (days)
MATCHING_EXCLUDE_PREVIOUS_DAYS=90

# Matching schedule (cron format: Monday at 00:00 UTC)
MATCHING_CRON_SCHEDULE=0 0 * * 1

#──────────────────────────────────────────────────────────────
# Monitoring & Logging
#──────────────────────────────────────────────────────────────

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Enable request logging
LOG_REQUESTS=true

# Sentry DSN for error tracking
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=development

# Prometheus metrics enabled
PROMETHEUS_ENABLED=true

# Prometheus metrics port
PROMETHEUS_PORT=9090

#──────────────────────────────────────────────────────────────
# Feature Flags
#──────────────────────────────────────────────────────────────

# Enable user registration
FEATURE_REGISTRATION_ENABLED=true

# Enable video verification
FEATURE_VIDEO_VERIFICATION_ENABLED=true

# Enable AI matching
FEATURE_AI_MATCHING_ENABLED=true

# Enable video calls
FEATURE_VIDEO_CALLS_ENABLED=true

# Enable in-app messaging
FEATURE_MESSAGING_ENABLED=false

# Maintenance mode
FEATURE_MAINTENANCE_MODE=false

#──────────────────────────────────────────────────────────────
# CORS Configuration
#──────────────────────────────────────────────────────────────

# Allowed origins (comma-separated, * for all)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8081

# Allowed methods
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# Allowed headers
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Allow credentials
CORS_ALLOW_CREDENTIALS=true

#──────────────────────────────────────────────────────────────
# Mobile App Configuration (for reference)
#──────────────────────────────────────────────────────────────

# API endpoint (mobile app will use this)
# MOBILE_API_URL=http://localhost:8080

# Enable debug mode in mobile app
# MOBILE_DEBUG_MODE=true

# Enable analytics
# MOBILE_ANALYTICS_ENABLED=false

#──────────────────────────────────────────────────────────────
# Development & Testing
#──────────────────────────────────────────────────────────────

# Enable hot reload
DEV_HOT_RELOAD=true

# Seed database on startup
DEV_SEED_DATABASE=false

# Mock external services
DEV_MOCK_SERVICES=false

# Test user credentials
TEST_USER_EMAIL=test@findme.ai
TEST_USER_PASSWORD=Test123!@#

#──────────────────────────────────────────────────────────────
# Production Security (IMPORTANT!)
#──────────────────────────────────────────────────────────────

# In production, ensure:
# 1. Change all default passwords and secrets
# 2. Use strong JWT_SECRET_KEY (64+ random characters)
# 3. Enable DB_SSL_MODE=require or higher
# 4. Use environment-specific credentials
# 5. Enable HTTPS/TLS for all services
# 6. Regularly rotate secrets and API keys
# 7. Use secrets management service (AWS Secrets Manager, HashiCorp Vault, etc.)
# 8. Never commit .env file to version control
# 9. Use different .env files for different environments
# 10. Regularly audit and update security configurations
